<script>
    var KTAppOptions = {
        "colors": {
            "state": {
                "brand": "#5d78ff",
                "dark": "#282a3c",
                "light": "#ffffff",
                "primary": "#5867dd",
                "success": "#34bfa3",
                "info": "#36a3f7",
                "warning": "#ffb822",
                "danger": "#fd3995"
            },
            "base": {
                "label": ["#c5cbe3", "#a1a8c3", "#3d4465", "#3e4466"],
                "shape": ["#f0f3ff", "#d9dffa", "#afb4d4", "#646c9a"]
            }
        }
    };
</script>

<!-- end::Global Config -->

<!--begin:: Global Mandatory Vendors -->
<script src="{{asset('/assets/vendors/general/jquery/dist/jquery.js')}}" type="text/javascript"></script>
<script src="{{asset('/assets/vendors/general/popper.js/dist/umd/popper.js')}}" type="text/javascript"></script>
<script src="{{asset('/assets/vendors/general/bootstrap/dist/js/bootstrap.min.js')}}" type="text/javascript"></script>
<script src="{{asset('/assets/vendors/general/js-cookie/src/js.cookie.js')}}" type="text/javascript"></script>
<script src="{{asset('/assets/vendors/general/moment/min/moment.min.js')}}" type="text/javascript"></script>
<script src="{{asset('/assets/vendors/general/tooltip.js/dist/umd/tooltip.min.js')}}" type="text/javascript"></script>
<script src="{{asset('/assets/vendors/general/perfect-scrollbar/dist/perfect-scrollbar.js')}}" type="text/javascript"></script>
<script src="{{asset('/assets/vendors/general/sticky-js/dist/sticky.min.js')}}" type="text/javascript"></script>
<script src="{{asset('/assets/vendors/general/wnumb/wNumb.js')}}" type="text/javascript"></script>

<!--end:: Global Mandatory Vendors -->

<!--begin:: Global Optional Vendors -->
<!-- <script src="{{asset('/assets/vendors/general/jquery-form/dist/jquery.form.min.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/block-ui/jquery.blockUI.js')}}" type="text/javascript"></script> -->
<script src="{{asset('/assets/vendors/general/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js')}}" type="text/javascript"></script>
<script src="{{asset('/assets/vendors/custom/components/vendors/bootstrap-datepicker/init.js')}}" type="text/javascript"></script>
<script src="{{asset('/assets/vendors/general/bootstrap-datetime-picker/js/bootstrap-datetimepicker.min.js')}}" type="text/javascript"></script>
<script src="{{asset('/assets/vendors/general/bootstrap-timepicker/js/bootstrap-timepicker.min.js')}}" type="text/javascript"></script>
<script src="{{asset('/assets/vendors/custom/components/vendors/bootstrap-timepicker/init.js')}}" type="text/javascript"></script>
<script src="{{asset('/assets/vendors/general/bootstrap-daterangepicker/daterangepicker.js')}}" type="text/javascript"></script>
<!-- <script src="{{asset('/assets/vendors/general/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/bootstrap-maxlength/src/bootstrap-maxlength.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/custom/vendors/bootstrap-multiselectsplitter/bootstrap-multiselectsplitter.min.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/bootstrap-select/dist/js/bootstrap-select.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/bootstrap-switch/dist/js/bootstrap-switch.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/custom/components/vendors/bootstrap-switch/init.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/select2/dist/js/select2.full.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/ion-rangeslider/js/ion.rangeSlider.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/typeahead.js/dist/typeahead.bundle.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/handlebars/dist/handlebars.js')}}" type="text/javascript"></script> -->
<script src="{{asset('/assets/vendors/general/inputmask/dist/jquery.inputmask.bundle.js')}}" type="text/javascript"></script>
<script src="{{asset('/assets/vendors/general/inputmask/dist/inputmask/inputmask.date.extensions.js')}}" type="text/javascript"></script>
<script src="{{asset('/assets/vendors/general/inputmask/dist/inputmask/inputmask.numeric.extensions.js')}}" type="text/javascript"></script>
<!-- <script src="{{asset('/assets/vendors/general/nouislider/distribute/nouislider.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/owl.carousel/dist/owl.carousel.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/autosize/dist/autosize.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/clipboard/dist/clipboard.min.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/dropzone/dist/dropzone.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/summernote/dist/summernote.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/markdown/lib/markdown.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/bootstrap-markdown/js/bootstrap-markdown.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/custom/components/vendors/bootstrap-markdown/init.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/bootstrap-notify/bootstrap-notify.min.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/custom/components/vendors/bootstrap-notify/init.js')}}" type="text/javascript"></script> -->
<script src="{{asset('/assets/vendors/general/jquery-validation/dist/jquery.validate.js')}}" type="text/javascript"></script>
<script src="{{asset('/assets/vendors/general/jquery-validation/dist/additional-methods.js')}}" type="text/javascript"></script>
<script src="{{asset('/assets/vendors/custom/components/vendors/jquery-validation/init.js')}}" type="text/javascript"></script>
<!-- <script src="{{asset('/assets/vendors/general/toastr/build/toastr.min.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/raphael/raphael.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/morris.js/morris.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/chart.js/dist/Chart.bundle.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/custom/vendors/bootstrap-session-timeout/dist/bootstrap-session-timeout.min.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/custom/vendors/jquery-idletimer/idle-timer.min.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/waypoints/lib/jquery.waypoints.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/counterup/jquery.counterup.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/es6-promise-polyfill/promise.min.js')}}" type="text/javascript"></script> -->
<script src="{{asset('/assets/vendors/general/sweetalert2/dist/sweetalert2.min.js')}}" type="text/javascript"></script>
<script src="{{asset('/assets/vendors/custom/components/vendors/sweetalert2/init.js')}}" type="text/javascript"></script>
<!-- <script src="{{asset('/assets/vendors/general/jquery.repeater/src/lib.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/jquery.repeater/src/jquery.input.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/jquery.repeater/src/repeater.js')}}" type="text/javascript"></script> -->
<!-- <script src="{{asset('/assets/vendors/general/dompurify/dist/purify.js')}}" type="text/javascript"></script> -->

<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.10/jquery.mask.js"></script>

<!--end:: Global Optional Vendors -->

<!--begin::Global Theme Bundle(used by all pages) -->
<script src="{{asset('/assets/demo/default/base/scripts.bundle.js')}}" type="text/javascript"></script>

<!--end::Global Theme Bundle -->

<!--begin::Page Scripts(used by this page) -->
<script src="{{asset('/assets/app/custom/login/login-v1.js')}}" type="text/javascript"></script>

<!--end::Page Scripts -->

<!--begin::Global App Bundle(used by all pages) -->
<script src="{{asset('/assets/app/bundle/app.bundle.js')}}" type="text/javascript"></script>

<script src="{{asset('/assets/app/custom/general/crud/forms/validation/form-widgets.js')}}" type="text/javascript"></script>

<script>
    /**
     * Mask CEP
     *
     */
    $('.cep').mask(('00000-000'));


    /**
     * Mask CPF / CNPJ
     *
     */

    $(document).on('keydown', '.input_cpf_cnpj', function(e) {
        var digit = e.key.replace(/\D/g, '');
        var value = $(this).val().replace(/\D/g, '');
        var size = value.concat(digit).length;
        $(this).mask((size <= 11) ? '000.000.000-00' : '00.000.000/0000-00');
    });

    /**
     * Mask Contato
     *
     */

    $(document).on('keydown', '.mask_input_contact', function(e) {
        var digit = e.key.replace(/\D/g, '');
        var value = $(this).val().replace(/\D/g, '');
        var size = value.concat(digit).length;
        $(this).mask((size <= 10) ? '(00)0000-0000' : '(00)00000-0000');
    });


    /*
     * DELETE FUCTION
     */
    function ajax_delete(id, url) {

        const swalWithBootstrapButtons = Swal.mixin({
            customClass: {
                confirmButton: 'btn btn-success',
                cancelButton: 'btn btn-danger'
            },
            buttonsStyling: false
        })

        swalWithBootstrapButtons.fire({
            title: 'Tem certeza?',
            text: "Deseja realmente deletar o registro " + id,
            type: 'warning',
            showCancelButton: true,
            confirmButtonText: 'Sim!',
            cancelButtonText: 'Não!',
            reverseButtons: true
        }).then((result) => {

            if (result.value) {

                $.ajax({
                    url: url,
                    method: 'GET',
                }).done(function(data) {

                    if (data.status == 'error') {
                        Swal.fire({
                            type: 'error',
                            title: 'Não foi possível excluir o registro',
                            text: data.message,
                            showConfirmButton: true,
                            timer: 10000
                        })
                    } else {
                        $('#_tr_user_' + id).hide()
                        Swal.fire({
                            type: 'success',
                            title: 'Registro excluído com sucesso',
                            showConfirmButton: true,
                            timer: 10000
                        })
                    }

                }).fail(function(data) {
                    Swal.fire({
                        type: 'error',
                        title: 'Oops...',
                        text: 'Erro ao tentar excluir!',
                        showConfirmButton: true,
                        timer: 10000
                    })
                });

            }
        })
    }

    /*
    INSERT FUNCTION
     */
    function ajax_store(id, route, form_data, reload = false) {

        if (id != "") {
            var url = "{{url('')}}/" + route + "/update/" + id;
            var method = "PUT";
        } else {
            var url = "{{url('')}}/" + route + "/save";
            var method = "POST";
        }

        $.ajax({
            url: url,
            type: method,
            data: form_data,
            success: function(response) {
                console.log(response)
                if (response.status == "success") {
                    Swal.fire({
                        type: 'success',
                        title: 'Registro salvo com sucesso',
                        showConfirmButton: true,
                        timer: 10000
                    }).then((result) => {
                        if (reload) {
                            location.reload();
                        } else {
                            $(location).attr('href', '{{url("")}}/' + route);
                        }

                    })

                } else {
                    Swal.fire({
                        type: 'error',
                        title: 'Oops...',
                        text: 'Erro ao tentar salvar! ' + response.message,
                        showConfirmButton: true,
                        timer: 10000
                    })
                }

            },
            error: function(error) {
                if (error.responseJSON.status == "internal_error") {
                    Swal.fire({
                        type: 'error',
                        title: 'Oops...',
                        text: 'Erro interno, entre em contato com o desenvolvedor do sistema!',
                        showConfirmButton: true,
                        timer: 10000
                    })

                } else if (error.responseJSON.status == "validation_error") {
                    var items = error.responseJSON.errors;
                    Swal.fire({
                        type: 'error',
                        title: 'Erro!',
                        html: 'Os seguintes erros foram encontrados: ' + items,
                        footer: ' '
                    })

                } else {
                    var items = error.responseJSON.errors;
                    var errors = $.map(items, function(i) {
                        return i.join('<br />');
                    });
                    Swal.fire({
                        type: 'error',
                        title: 'Erro!',
                        html: 'Os seguintes erros foram encontrados: ' + errors,
                        footer: ' '
                    })
                }

            }
        });

    }

    /*
    AJAX FIND DATA
     */

    function ajax_find_data(input_search, form_search, route) {
        if (input_search !== "") {
            $(this).html('<i class="fa fa-spinner fa-pulse"></i>')
            $.ajax({
                type: 'POST',
                dataType: 'json',
                url: "{{url('')}}/" + route + "/search",
                async: true,
                data: form_search,
                success: function(response) {
                    console.log(response.data);
                    if (response.status == "success") {

                        $("#btn-search").html('<i class="fa fa-search"></i>')
                        $('#name').html(response.data.name)
                        $('#cpf_cnpj').html(response.data.cpf_cnpj)
                        $('#type').html(response.data.type)
                        $('#cep').html(response.data.cep)
                        $('#address').html(response.data.address)
                        $('#complement').html(response.data.complement)
                        $('#number').html(response.data.number)
                        $('#city').html(response.data.city)
                        $('#state').html(response.data.state)
                        $('#id').html(response.data.id)
                        $('#customer_id').val(response.data.id)
                        return response.data;

                    } else {
                        Swal.fire({
                            type: 'error',
                            title: 'Oops...',
                            text: response.message,
                            showConfirmButton: true,
                            timer: 10000
                        })
                        $("#input-search").val('')
                        $("#btn-search").html('<i class="fa fa-search"></i>')
                    }
                }
            });

        } else {
            Swal.fire({
                type: 'warning',
                title: 'Oops...',
                text: 'Informe um CPF ou CNPJ',
                showConfirmButton: true,
                timer: 10000
            })
        }
    }

    /*
    INSERT PERMISSION
    */
    function ajax_permission(id, route, form_data, reload = false) {

        var url = "{{url('')}}/" + route + "/update/" + id;
        var method = "POST";
        console.log(form_data);

        $.ajax({
            url: url,
            type: method,
            data: form_data,
            success: function(response) {
                console.log(response)
                if (response.status == "success") {
                    Swal.fire({
                        type: 'success',
                        title: 'Permissões configuradas!',
                        showConfirmButton: true,
                        timer: 10000
                    })

                } else {
                    Swal.fire({
                        type: 'error',
                        title: 'Oops...',
                        text: 'Erro ao tentar salvar! ' + response.message,
                        showConfirmButton: true,
                        timer: 10000
                    })
                }

            },
            error: function(error) {
                console.log(error.responseJSON)
                if (error.responseJSON.status == "internal_error") {
                    Swal.fire({
                        type: 'error',
                        title: 'Oops...',
                        text: 'Erro interno, entre em contato com o desenvolvedor do sistema!',
                        showConfirmButton: true,
                        timer: 10000
                    })

                } else if (error.responseJSON.status == "validation_error") {
                    var items = error.responseJSON.errors;
                    Swal.fire({
                        type: 'error',
                        title: 'Erro!',
                        html: 'Os seguintes erros foram encontrados: ' + items,
                        footer: ' '
                    })

                } else {
                    var items = error.responseJSON.errors;
                    var errors = $.map(items, function(i) {
                        return i.join('<br />');
                    });
                    Swal.fire({
                        type: 'error',
                        title: 'Erro!',
                        html: 'Os seguintes erros foram encontrados: ' + errors,
                        footer: ' '
                    })
                }

            }
        });

    }

    /**
    INSERT FUNCTION
*/
    function ajax_store_cards_driver(id, route, form_data, reload = false) {

        if (id != "") {
            var url = "{{url('')}}/" + route + "/update/" + id;
            var method = "PUT";
        } else {
            var url = "{{url('')}}/" + route + "/save";
            var method = "POST";
        }

        $.ajax({
            url: url,
            type: method,
            data: form_data,
            success: function(response) {
                console.log(response)
                if (response.status == "success") {
                    Swal.fire({
                        type: 'success',
                        title: 'Registro salvo com sucesso',
                        showConfirmButton: true,
                        timer: 10000
                    }).then((result) => {
                        $("#reloadOption").load(location.href + " #reloadOption>*", "");
                        setTimeout(function() {
                            $('#exampleModal').modal('hide')
                        }, 1000);
                    })

                } else {
                    Swal.fire({
                        type: 'error',
                        title: 'Oops...',
                        text: 'Erro ao tentar salvar! ' + response.message,
                        showConfirmButton: true,
                        timer: 10000
                    })
                }

            },
            error: function(error) {
                console.log(error.responseJSON)
                if (error.responseJSON.status == "internal_error") {
                    Swal.fire({
                        type: 'error',
                        title: 'Oops...',
                        text: 'Erro interno, entre em contato com o desenvolvedor do sistema!',
                        showConfirmButton: true,
                        timer: 10000
                    })

                } else if (error.responseJSON.status == "validation_error") {
                    var items = error.responseJSON.errors;
                    Swal.fire({
                        type: 'error',
                        title: 'Erro!',
                        html: 'Os seguintes erros foram encontrados: ' + items,
                        footer: ' '
                    })

                } else {
                    var items = error.responseJSON.errors;
                    var errors = $.map(items, function(i) {
                        return i.join('<br />');
                    });
                    Swal.fire({
                        type: 'error',
                        title: 'Erro!',
                        html: 'Os seguintes erros foram encontrados: ' + errors,
                        footer: ' '
                    })
                }

            }
        });

    }
</script>
